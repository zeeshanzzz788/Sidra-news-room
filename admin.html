<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin • Sidra News Room</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-zinc-950 text-white min-h-screen">

    <!-- LOGIN -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center">
        <div class="bg-zinc-900 p-10 rounded-3xl w-full max-w-md">
            <img src="https://pbs.twimg.com/profile_images/1993382470054543360/UHU6o--k.jpg" class="h-20 mx-auto mb-8">
            <h1 class="text-3xl font-bold text-center mb-10">Sidra News Room Admin</h1>
            <input id="username" type="text" value="admin" placeholder="Username" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4 mb-4">
            <input id="password" type="password" placeholder="Password" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4 mb-8">
            <button onclick="attemptLogin()" class="w-full bg-[#bb1919] hover:bg-red-700 py-5 rounded-2xl font-bold text-lg">LOGIN TO DASHBOARD</button>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" class="hidden">
        <nav class="bg-zinc-900 border-b border-zinc-700 px-6 py-5 flex justify-between sticky top-0">
            <div class="flex items-center gap-4">
                <img src="https://pbs.twimg.com/profile_images/1993382470054543360/UHU6o--k.jpg" class="h-9">
                <span class="font-bold text-2xl">SIDRA NEWS ROOM <span class="text-xs text-emerald-400">ADMIN</span></span>
            </div>
            <button onclick="logout()" class="px-6 py-3 bg-red-900 hover:bg-red-800 rounded-2xl">Logout</button>
        </nav>

        <div class="max-w-6xl mx-auto p-6">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-bold">All Articles</h1>
                <button onclick="showNewForm()" class="bg-emerald-600 hover:bg-emerald-700 px-8 py-4 rounded-2xl flex items-center gap-3 font-medium">
                    <i class="fas fa-plus"></i> New Article
                </button>
            </div>

            <div class="bg-zinc-900 rounded-3xl overflow-hidden">
                <table class="w-full">
                    <thead>
                        <tr class="text-xs text-zinc-400 border-b border-zinc-700">
                            <th class="text-left px-8 py-5">TITLE</th>
                            <th class="text-left px-8 py-5">CATEGORY</th>
                            <th class="text-left px-8 py-5">DATE</th>
                            <th class="text-center px-8 py-5">ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody" class="divide-y divide-zinc-700"></tbody>
                </table>
            </div>
        </div>

        <!-- Article Form -->
        <div id="formOverlay" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50">
            <div class="bg-zinc-900 w-full max-w-2xl rounded-3xl max-h-[90vh] overflow-auto">
                <div class="p-8">
                    <h2 id="formHeader" class="text-3xl font-bold mb-8">New Article</h2>
                    <form id="articleForm" onsubmit="saveArticle(event)">
                        <input type="hidden" id="editId">
                        <div class="space-y-6">
                            <input id="title" required placeholder="Article Title" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4">
                            <select id="category" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4">
                                <option value="SidraChain">SidraChain</option>
                                <option value="DeFi">DeFi & Markets</option>
                                <option value="Shariah">Shariah Finance</option>
                                <option value="Community">Community</option>
                            </select>
                            <input id="image" placeholder="Image URL (optional)" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4">
                            <textarea id="excerpt" rows="3" placeholder="Short excerpt" class="w-full bg-zinc-800 border border-zinc-700 rounded-2xl px-6 py-4"></textarea>
                            <textarea id="content" rows="10" placeholder="Full article content" class="w-full bg-zinc-800 border border-zinc-700 rounded-3xl px-6 py-4"></textarea>
                        </div>
                        <div class="flex gap-4 mt-10">
                            <button type="submit" class="flex-1 bg-emerald-600 hover:bg-emerald-700 py-5 rounded-2xl font-bold">SAVE ARTICLE</button>
                            <button type="button" onclick="hideForm()" class="flex-1 bg-zinc-800 hover:bg-zinc-700 py-5 rounded-2xl font-bold">CANCEL</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CHANGE THIS PASSWORD AFTER FIRST LOGIN
        const CORRECT_PASSWORD = "SidraSecure2026!ZeeshanPK42";

        let articles = JSON.parse(localStorage.getItem('sidraArticles')) || [];

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            articles.forEach((a, i) => {
                tbody.innerHTML += `
                    <tr>
                        <td class="px-8 py-6">${a.title}</td>
                        <td class="px-8 py-6">${a.category}</td>
                        <td class="px-8 py-6">${a.date}</td>
                        <td class="px-8 py-6 text-center">
                            <button onclick="editArticle(${i})" class="text-sky-400 mx-3"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteArticle(${i})" class="text-red-400 mx-3"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                `;
            });
        }

        function attemptLogin() {
            if (document.getElementById('password').value === CORRECT_PASSWORD) {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                renderTable();
            } else {
                alert("❌ Wrong password");
            }
        }

        function logout() {
            location.reload();
        }

        function showNewForm() {
            document.getElementById('formHeader').textContent = "New Article";
            document.getElementById('articleForm').reset();
            document.getElementById('editId').value = "";
            document.getElementById('formOverlay').classList.remove('hidden');
        }

        function hideForm() {
            document.getElementById('formOverlay').classList.add('hidden');
        }

        function saveArticle(e) {
            e.preventDefault();
            const newArt = {
                id: Date.now(),
                title: document.getElementById('title').value,
                category: document.getElementById('category').value,
                date: "21 Feb 2026",
                image: document.getElementById('image').value || "https://picsum.photos/id/1015/800/500",
                excerpt: document.getElementById('excerpt').value,
                content: document.getElementById('content').value
            };
            const editId = document.getElementById('editId').value;
            if (editId) {
                articles[editId] = newArt;
            } else {
                articles.unshift(newArt);
            }
            localStorage.setItem('sidraArticles', JSON.stringify(articles));
            renderTable();
            hideForm();
            alert("✅ Article saved! Refresh the public site to see it live.");
        }

        function editArticle(i) {
            const a = articles[i];
            document.getElementById('formHeader').textContent = "Edit Article";
            document.getElementById('editId').value = i;
            document.getElementById('title').value = a.title;
            document.getElementById('category').value = a.category;
            document.getElementById('image').value = a.image;
            document.getElementById('excerpt').value = a.excerpt;
            document.getElementById('content').value = a.content;
            document.getElementById('formOverlay').classList.remove('hidden');
        }

        function deleteArticle(i) {
            if (confirm("Delete this article forever?")) {
                articles.splice(i, 1);
                localStorage.setItem('sidraArticles', JSON.stringify(articles));
                renderTable();
            }
        }

        // Auto-open admin if already logged in this session
        window.onload = () => {
            if (localStorage.getItem('sidraAdminLogged') === 'true') {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                renderTable();
            }
        };
    </script>
</body>
</html>
